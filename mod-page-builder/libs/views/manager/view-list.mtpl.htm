<!-- Pagebuilder/Manage @ List / Records :: v.180402 -->
<div style="margin-bottom:5px;"><h1 style="display:inline-block;">[####LIST-TTL|html####]</h1></div>
<style>
	.smartGrid_AlignCenter {
		text-align: center;
	}
	.smartGrid_AlignRight {
		text-align: right;
	}
	.smartGrid_Important {
		font-weight: bold;
	}
	.smartGrid_column_UUID {
		color: #999999;
		text-align: center;
	}
	.smartGrid_HeadHighlight {
		background-color: #999999 !important;
		color: #FFFFFF !important;
	}
</style>
<link rel="stylesheet" type="text/css" href="lib/js/jquery/pager/simplePagination.css">
<script type="text/javascript" src="lib/js/jquery/pager/jquery.simplePagination.js"></script>
<script type="text/javascript" src="lib/js/jquery/jquery.event.drag.js"></script>
<script type="text/javascript" src="lib/js/jquery/jquery.event.drop.js"></script>
<script type="text/javascript" src="lib/js/jquery/jquery.simulate.js"></script>
<link rel="stylesheet" type="text/css" href="lib/js/jquery/slickgrid/slick.grid.css">
<link rel="stylesheet" type="text/css" href="lib/js/jquery/slickgrid/slick.grid-fixes.css">
<script type="text/javascript" src="lib/js/jquery/slickgrid/slick.grid.js"></script>
<script type="text/javascript" src="lib/js/jquery/slickgrid/slick.editors.js"></script>
<script type="text/javascript" src="lib/js/jquery/slickgrid/smart-grid.js"></script>
<script type="text/javascript">
	//--
	var IdOfGrid = 'PageBuilderSlickGrid';
	var TheGrid = new Smart_Grid(IdOfGrid, 'infoTotalRows', '[####LIST-JSON-URL|js####]', 'PageBuilder_Smart_Slickgrid_List', 'id', 'ASC', '', 'filtering');
	//--
</script>
<form id="filtering" name="filtering" class="ux-form">
	<table><tr>
	<td>
		<select name="lst" id="filter-lst" class="ux-input-def ux-input-1-4">
			<option value=""></option>
			<option value="a">[####TXT-PG-ACTIVE|html####]</option>
			<option value="i">[####TXT-PG-INACTIVE|html####]</option>
			<option value="s">[####TXT-PG-SEGMENTS|html####]</option>
		</select>
	</td>
	<td><span style="display:inline-block;"><input type="text" id="filter-src" name="src" placeholder="[####TXT-SEARCH-BY|html####] ..." value="" class="ux-input-def ux-input-1-4"></span></td>
	<td>
		<select name="srcby" id="filter-srcby" class="ux-input-def ux-input-1-4">
			<option value=""></option>
			<option value="id">[####TXT-COL-ID|html####]</option>
			<option value="name">[####TXT-COL-NAME|html####]</option>
			<option value="code">[####TXT-COL-CODE|html####]</option>
			<option value="data">[####TXT-COL-RUNTIME|html####]</option>
		</select>
	</td>
	<td>&nbsp;</td>
	<td><button type="button" class="ux-button ux-button-primary" onClick="TheGrid.loadGridData(0);">[####TXT-FILTER|html####] &nbsp; <i class="fa fa-filter"></i></button></td>
	<td><button type="button" class="ux-button ux-button-secondary" onClick="TheGrid.resetGrid(); TheGrid.loadGridData(0);">[####TXT-RESET|html####] &nbsp; <i class="fa fa-times"></i></button></td>
	<td>
	[%%%%IF:LIST-NEW-URL:!=;%%%%]
	<a class="ux-button ux-button-special" href="[####LIST-NEW-URL|html####]" data-smart="open.modal">[####TXT-ADD-NEW|html####] &nbsp; <i class="fa fa-plus"></i></a>
	[%%%%ELSE:LIST-NEW-URL%%%%]
	&nbsp;
	[%%%%/IF:LIST-NEW-URL%%%%]
	</td>
	<td><div style="width:32px;">&nbsp;</div></td>
	<td><span style="color:#CCCCCC; line-height:24px; font-size:24px; font-weight:bold;">[####LIST-RECORDS|html####] :: <span id="infoTotalRows"># / # @</span></span></td>
	</tr></table>
</form>
<br>
<div id="PageBuilderNavPager"></div>
<form class="ux-form"><div id="PageBuilderSlickGrid" class="slickgrid-table" style="font-size:10px;width:100%;height:10px;"></div></form>
<script type="text/javascript">
jQuery(function() {

	var displayOps = function(row, cell, value, columnDef, dataContext) {
		var html = '';
		html += '<div align="center" style="padding-top:2px;">';
		[%%%%IF:LIST-DELETE-URL:!=;%%%%]
		html += '<a href="[####LIST-DELETE-URL|js####]' + SmartJS_CoreUtils.escape_url(value) + '" data-smart="open.modal">';
		html += '<img src="[####PATH-MODULE|html|js####]libs/views/manager/img/op-delete.svg" alt="Delete" title="Delete">';
		html += '</a>';
		[%%%%ELSE:LIST-DELETE-URL%%%%]
		html += '&nbsp;';
		[%%%%/IF:LIST-DELETE-URL%%%%]
		html += '</div>';
		return html;
	}

	var displayID = function(row, cell, value, columnDef, dataContext) {
		value = String(value);
		var img = 'type-page.svg';
		var txt = 'Page Object';
		var style = '';
		if(value.substr(0, 1) == '#') {
			img = 'type-segment.svg';
			txt = 'Segment Object';
			style = ' font-style:italic;';
		}
		var link_start = '';
		var link_end = '';
		[%%%%IF:LIST-RECORD-URL:!=;%%%%]
		link_start = '<a href="[####LIST-RECORD-URL|js####]' + SmartJS_CoreUtils.escape_url(value) + '" data-smart="open.modal" style="text-decoration:none;">';
		link_end = '</a>';
		[%%%%/IF:LIST-RECORD-URL%%%%]
		return '<div align="left" style="display:inline-block; padding-left:5px; padding-top:2px;">' + link_start + '<img src="[####PATH-MODULE|html|js####]libs/views/manager/img/' + img + '" alt="' + SmartJS_CoreUtils.escape_html(txt) + '" title="' + SmartJS_CoreUtils.escape_html(txt) + '">' + link_end + '</div><div align="left" style="display:inline-block; padding-left:15px; padding-top:0px;' + style + '">' + SmartJS_CoreUtils.escape_html(value) + '</div>';
	}

	var displayCodeType = function(row, cell, value, columnDef, dataContext) {
		var img = 'syntax-unknown.svg';
		switch(String(value)) {
			case 'html':
				img = 'syntax-html.svg';
				break;
			case 'text':
				img = 'syntax-text.svg';
				break;
			case 'markdown':
				img = 'syntax-markdown.svg';
				break;
			case 'raw':
				img = 'syntax-raw.svg';
				break;
			case 'settings':
				img = 'syntax-settings.svg';
				break;
		}
		return '<div align="center" style="padding-top:2px;"><img src="[####PATH-MODULE|html|js####]libs/views/manager/img/' + img + '" alt="' + SmartJS_CoreUtils.escape_html(value) + '" title="' + SmartJS_CoreUtils.escape_html(value) + '"></div>';
	}

	var displaySpecial = function(row, cell, value, columnDef, dataContext) {
		var img = 'admin-default.svg';
		var txt = 'Default Privileges';
		if(value == 1) {
			img = 'admin-special.svg';
			txt = 'Special Privileges';
		}
		return '<div align="center" style="padding-top:2px;"><img src="[####PATH-MODULE|html|js####]libs/views/manager/img/' + img + '" alt="' + SmartJS_CoreUtils.escape_html(txt) + '" title="' + SmartJS_CoreUtils.escape_html(txt) + '"></div>';
	}

	var displayActive = function(row, cell, value, columnDef, dataContext) {
		var img = 'status-inactive.svg';
		var txt = 'Inactive Page';
		if(value == 1) {
			img = 'status-active.svg';
			txt = 'Active Page';
		}
		if(String(dataContext.id).substr(0, 1) == '#') {
			img = 'status-linked.svg';
			txt = 'All Segments are Active if used Programatically';
		}
		return '<div align="center" style="padding-top:2px;"><img src="[####PATH-MODULE|html|js####]libs/views/manager/img/' + img + '" alt="' + SmartJS_CoreUtils.escape_html(txt) + '" title="' + SmartJS_CoreUtils.escape_html(txt) + '"></div>';
	}

	var displayAuth = function(row, cell, value, columnDef, dataContext) {
		var img = 'restr-public.svg';
		var txt = 'Public Access';
		if(value == 1) {
			img = 'restr-private.svg';
			txt = 'Restricted Access (Login Required)';
		}
		if(String(dataContext.id).substr(0, 1) == '#') {
			img = 'restr-unknown.svg';
			txt = 'Unknown (Segments may be used in any context ...)';
		}
		return '<div align="center" style="padding-top:2px;"><img src="[####PATH-MODULE|html|js####]libs/views/manager/img/' + img + '" alt="' + SmartJS_CoreUtils.escape_html(txt) + '" title="' + SmartJS_CoreUtils.escape_html(txt) + '"></div>';
	}

	var diffColSize = function() {
		var size = parseInt(jQuery(window).width() - 50 - 325 - 75 - 75 - 75 - 75) - 100;
		if(size < 100) {
			size = 100;
		}
		return size;
	}

	// Grid Data Defs: defaultSortDir:1
	var columns = [
		{id:'x-ops', 	field:'id', 	name:'#', 								sortable:false, 	width:50, 				formatter:displayOps},
		{id:'id', 		field:'id', 	name:'[####TXT-COL-ID|js####]', 		sortable:true, 		width:325, 				formatter:displayID, editor:TextCellSelector, cssClass:'smartGrid_Important'},
		{id:'mode', 	field:'mode', 	name:'[####TXT-COL-SYNTAX|js####]', 	sortable:true, 		width:75, 				formatter:displayCodeType, editor:TextCellSelector},
		{id:'name', 	field:'name', 	name:'[####TXT-COL-NAME|js####]', 		sortable:true, 		width:diffColSize(), 	editor:TextCellSelector},
		{id:'special', 	field:'special',name:'[####TXT-COL-SPECIAL|js####]', 	sortable:true, 		width:75, 				formatter:displaySpecial, editor:TextCellSelector},
		{id:'active', 	field:'active', name:'[####TXT-COL-ACTIVE|js####]', 	sortable:true, 		width:75, 				formatter:displayActive, editor:TextCellSelector},
		{id:'auth', 	field:'auth', 	name:'[####TXT-COL-AUTH|js####]', 		sortable:true, 		width:75, 				formatter:displayAuth, editor:TextCellSelector},
	];

	//-- Grid Options
	var options = {
		enableAddRow: false,
		enableCellNavigation: true,
		enableColumnReorder: false,
		enableAsyncPostRender: true,
		forceFitColumns: false,
		asyncPostRenderDelay: 15,
		rowHeight: 27,
		editable: true,
		autoEdit: false,
	//	enableTextSelectionOnCells: false,
		asyncEditorLoading: false
	};

	// Grid sizing
	var winW = jQuery(window).width();
	var winH = jQuery(window).height();
	var diffW = 25;
	var diffH = 275;
	jQuery('#' + IdOfGrid).css({ 'width': parseInt(winW - diffW), 'height': parseInt(winH - diffH) });
	jQuery(window).resize(function() {
		winW = jQuery(window).width();
		winH = jQuery(window).height();
		jQuery('#' + IdOfGrid).css({ 'width': parseInt(winW - diffW), 'height': parseInt(winH - diffH) });
		TheGrid.grid.resizeCanvas();
		columns[3].width = diffColSize()
		TheGrid.grid.autosizeColumns();
	});

	// Runtime
	TheGrid.initNavPager('PageBuilderNavPager', 3);
	TheGrid.initGrid(columns, options);
	TheGrid.grid.resizeCanvas();
	TheGrid.grid.autosizeColumns();
	TheGrid.loadGridData(0);

});
//--
</script>
<!-- #END -->