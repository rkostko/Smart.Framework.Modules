<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<title>Fabric.js - Canvas Draw Rectangle</title>

	<script src="../fabric.js"></script>

</head>
<body>
<h1><a href="https://github.com/kangax/fabric.js" style="color:#666699;" target="_blank">Fabric.js</a> Draw Rectangle Demo</h1>

<canvas id="canvas" width="500" height="500" style="border:1px solid #aaa"></canvas>
<script>

var canvas = new fabric.Canvas('canvas');
var started, x, y;
canvas.on('mouse:down', function(options) {
	  if(canvas.getActiveObject()){
		return false;
	  }

	started = true;
	x = options.e.clientX;
	y = options.e.clientY;

	  var square = new fabric.Rect({
		  width: 0,
		  height: 0,
		  left: x,
		  top: y,
		  fill: '#000'
	  });

	  canvas.add(square);
	  canvas.setActiveObject(square);
  });

  canvas.on('mouse:move', function(options) {
	if(!started) {
		return false;
	}

	var w = Math.abs(options.e.clientX - x),
	h = Math.abs(options.e.clientY - y);

	if (!w || !h) {
		return false;
	}

	var square = canvas.getActiveObject();
	square.set('width', w).set('height', h);
  });

  canvas.on('mouse:up', function(options) {
	if(started) {
	  started = false;
	}

	var square = canvas.getActiveObject();

	canvas.add(square);
  });

</script>
</body>
</html>
